---
title: Virtualization
description: |
  Through virtualization, the same hardware can run multiple operating systems
  independently, making them think that each one of them controls the
  entire system.
---

Virtualization requires a hypervisor which is a low-level software that
virtualizes the underlying hardware and manages access to the real hardware,
either directly or through the host operating system (OS). Virtual machines
(VMs) and containers form the two main virtualized environments. Both have their
trade-offs based on complexity, size, performance, and security. Unikernels fall
somewhere between the two.

## Virtual machines

A VM represents an abstraction of the hardware on which an OS can run. The VM
tricks the OS into thinking that it alone has access to the system and that it
can control the underlying hardware. To achieve this, VMs rely on hypervisors
that run on the host.

A hypervisor incorporates hardware-enabled multiplexing and segmentation of
compute resources to use, secure, and ease the instantaneous runtime of
user-defined programs in a better manner. Inside the VM, the OS does not get to
know of the multiplexing which brings about its existence. The hypervisor
emulates devices by on behalf of the guest OS by segmenting them from the
underlying hardware. These devices include virtual CPUs, interrupt controllers
and network interface cards (NICs), etc.

Hypervisors generally fall into the following categories:

- **Type 1**: Also known as **bare-metal hypervisors**, these hypervisors have
  direct access to the hardware and control all the OSs that run on the host.
  The guest OSs have access to the physical hardware and the hypervisor
  arbitrates this access.

  Example: [Kernel Virtual Machine (KVM)][kvm]

- **Type 2**: Also known as **hosted hypervisors**, these hypervisors have to go
  through the host operating system to reach the hardware. They emulate hardware
  access using software components that behave like their hardware counterparts.

  Example: [VirtualBox][virtualbox]

<Image
  border
  ratio={16 / 6}
  src='/diagrams/vm-modes.svg'
  title='Figure 1'
  description='Comparison of different virtualization systems.'
/>

Figure 1 demonstrates how the degree of separation between a guest application,
the host OS, and the hardware becomes further removed as we go from (c) to (a).
The sole job of the host OS and kernel or hypervisor becomes that of:

- juggling multiple application runtimes and environments.
- presenting a subset or non-contiguous representation of hardware resources
  virtually, translating operations, and providing emulation and compatibility
  between the guest and the host.
- ultimately guarding access to them to prevent corruption or malicious attacks.

## Supported platforms

We can run Unikraft images in the following ways:

- Inside a VM using [QEMU-KVM][qemu-kvm] or [Xen][xen]: It acts as an OS, having
  the responsibility to configure the hardware components that it needs (clocks,
  more processors, etc.). This mode gives Unikraft direct and total control over
  hardware components, allowing advanced functionalities.
- As a [linuxu][linuxu] build: It behaves as a Linux user-space application.
  This severely limits its performance, as everything Unikraft does must go
  through the Linux kernel, via system calls. We recommend using this for
  development alone.

Unikraft supports both (para-)virtualized and emulated modes of QEMU.
Virtualized mode uses KVM while emulated mode does not. Using
(para-)virtualization, or hardware acceleration, yields greater performance and
allows Unikraft to see more hardware components. Emulation performs slower, but
allows using CPU architectures different from the host (e.g., we can run ARM
code on an x86 machine).

## Future virtualization support

We plan to support running Unikraft on [Hyper-V][hyper-v] and [VMWare][vmware].

[kvm]: https://linux-kvm.org/page/Main_Page
[virtualbox]: https://www.virtualbox.org/
[qemu-kvm]: /docs/operations/plats/kvm/
[xen]: /docs/operations/plats/xen/
[linuxu]: /docs/operations/plats/linuxu/
[hyper-v]:
  https://learn.microsoft.com/en-us/windows-server/virtualization/hyper-v/hyper-v-technology-overview
[vmware]: https://www.vmware.com/
